<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weddies - Match info </title>
  <meta name="description" content="Find and discover clubs using Weddies, the ultimate club search engine. Search by club name, league, and date.">
  <link rel="icon" href="Weddies-bg.png" type="image/x-icon">
  <link rel="shortcut icon" href="Weddies.png" type="image/x-icon">
<style>





* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}


body {
  background-color: black;
  margin-bottom: 10vh;
}

/* Navigation */
.nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 10vh;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
  background-color: #ffffff;
  overflow-x: auto;
  z-index: 9999;
}

.nav__link {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  min-width: 50px;
  overflow: hidden;
  white-space: nowrap;
  font-family: sans-serif;
  font-size: 1rem;
  color: #444444;
  text-decoration: none;
  transition: background-color 0.1s ease-in-out;
}

.nav__link:hover {
  background-color: #eeeeee;
}

.nav__link--active {
  color: #009578;
}

.nav__icon {
  font-size: 1.2rem;
}

.material-symbols-outlined {
  font-variation-settings: 'FILL' 1, 'wght' 700, 'GRAD' 0, 'opsz' 72;
  color: black;
}

.nav__link--active .material-symbols-outlined {
  color: #009578;
}

/* Matches */
.match {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0em;
  /*border: 1px solid #ccc;
  border-radius: 10px;*/
  margin: 1vh;
  background-color: #292929;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);




}


.homeLogo, .awayLogo {
  flex: 0 0 auto;  /* Do not grow, do not shrink, use automatic basis */
  /*margin: 0.5rem;*/ /* Added margin for better spacing */
width: 5vw;

  height: 5vh;
  object-fit: contain;
}

.homeName {
  flex: 0 0 calc(30% - 1rem); /* Adjust percentage as needed; -1rem is for padding */
  text-align: right;
  font-size: 1rem;
  color:white;
  padding: 0 0.5rem;  /* Add some padding to avoid text touching the edge */
  overflow: hidden; /* Hide overflow */
  white-space: normal;
  text-overflow: clip; /* Add ellipsis for overflow */
  word-wrap: break-word;



}
.awayName{
flex: 0 0 calc(30% - 1rem); /* Adjust percentage as needed; -1rem is for padding */
text-align: left;
font-size: 1rem;
color:white;
padding: 0 0.5rem;  /* Add some padding to avoid text touching the edge */
overflow: hidden; /* Hide overflow */
white-space: normal;
text-overflow: clip; /* Add ellipsis for overflow */
word-wrap: break-word;

}

.matchTime {
  flex: 0 0 auto;
  flex-basis: 10%;  /* Allocating 20% of available space */
  text-align: center;
  font-size: 1rem;
  color:white;
  white-space: normal;
  text-overflow: clip; /* Add ellipsis for overflow */
  word-wrap: break-word;
}

/* League */
.league {
  margin-top: 2vh;
  margin-bottom: 2vh;
  padding: 0em;
  background-color: #292929;
border-radius: 25px;
  border: 3px solid white;}


.league h2 {
 font-size: 1rem;
  margin: 0;
  padding: 0em;
  background-color: white;
  color:black;
}

.leagueInfo {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: white; border-radius: 25px;
  border: 2px solid white;}

.leagueLogo {
  max-width: 6vw;
  max-height: 6vh;
  margin-right: 1vw;
}


.logo-weddies-bg {

  top: 1.25em;
  left: 1.25em;
  z-index: 2;
  width: 4em;
  height: 4em;
  margin-bottom: 3vh;
}


.match-container {
  overflow: hidden;
  max-height: 1000px;  /* or any large number */
  transition: max-height 0.2s ease-in-out;
  margin-top: 10vh;
}

.modal2 {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 5;
  background-color: rgba(0, 0, 0, 0.7);
}

/* Modal Content */
.modal2-content {
  position: fixed;
  z-index: 5;
  transform: translate(-50%, -50%);
  background-color: #fefefe;
 top: 50%;
 left: 50%;
  width: 100%;
  height: 100%;
}

/* The Close Button */
.close2 {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close2:hover,
.close2:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}
.matchDetails {
  font-size: 14px;
  color: #ffffff; /* White text */
  text-align: center;
  margin-bottom: 3vh;
  padding: 10px;  /* Padding around text */
  background-color: #333333; /* Dark background for white text */
  border-radius: 4px;
  overflow-wrap: break-word;  /* To make sure the content wraps and doesn't overflow */
}

.matchDetails, .matchDetails .material-symbols-outlined {
  color: #ffffff; /* White text */
  font-size: 16px;
}
.goToMatches-button {
  position: fixed;
  top: 0;
  right: 0;
  padding: 10px 20px;
  background-color: transparent; /* Change as desired */
  color: white;
  border: none;
  cursor: pointer;
  z-index: 1000; /* Make sure the button appears above other elements */
}


.goToMatches-button, .goToMatches-button .material-symbols-outlined {
  color: white; /* White text */
  font-size: 16px;

}

#content {
  text-align: center;
}

#teamName {
  font-size: 2em;
  margin-bottom: 20px;
}

#swipeContainer {
  overflow: hidden;
  position: relative;
  width: 300px;
  height: 300px;
  margin: 0 auto;
}

#teamLogo, #stadiumImage {
  position: absolute;
  width: 300px;
  height: 300px;
  transition: all 0.3s ease;
}


</style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <title>Matches info</title>
</head>
<body>
  <button id="goToMatches" class="goToMatches-button">  <span class="material-symbols-outlined">
        arrow_back
    </span></button>
    <div id="content">
        <h1 id="teamName"></h1>
        <div id="swipeContainer">
          <img id="teamLogo" src="" alt="Team Logo">
          <img id="stadiumImage" src="" alt="Stadium Image">
        </div>
      </div>
<nav class="nav">
    <a href="index.html" class="nav__link">
        <span class="material-symbols-outlined">
            pin_drop
        </span>
    </a>
    <a href="#" class="nav__link">
        <span class="material-symbols-outlined">
            person
        </span>
    </a>
    <a href="matches.html" class="nav__link nav__link--active">
        <span class="material-symbols-outlined">
            table_rows
        </span>
    </a>
</nav>
<img src="Weddies-bg.png" alt="Logo" class="logo-weddies-bg"></div>


 <div id="matchContainer">
    <!-- Match divs will be populated by JavaScript -->
  </div>
</body>
<script>
let clubs = [];
let allFixtures = [];
// Fetch the CSV file
/*
fetch('teams.csv')
  .then((response) => response.text())
  .then((csvString) => {
    // Parse the CSV string
    Papa.parse(csvString, {
      header: true,
      dynamicTyping: false,
      skipEmptyLines: true,
      delimiter: ';', // Note: the example uses semicolon as delimiter
      complete: function (results) {
        clubs = results.data.map((row) => {
          return {
            leagueID: row.leagueID,
            leagueName: row.leagueName,
            leagueImage: row.leagueImage,
            clubID: row.clubID,
            clubName: row.clubName,
            clubCode: row.clubCode,
            country: row.country,
            founded: row.founded,
            national: row.national === "True" ? true : false,
            clubImageName: row.clubImageName,
            stadiumID: row.stadiumID,
            stadiumName: row.stadiumName,
            stadiumAddress: row.stadiumAddress,
            cityName: row.cityName,
            capacity: row.capacity,
            surface: row.surface,
            stadiumImageName: row.stadiumImageName,
            latitude: parseFloat(row.latitude),
            longitude: parseFloat(row.longitude),
          };
        });
        // Call your existing functions with the new data
        loadFixtures();
        console.log(clubs);
      },
    });
  })
  .catch((error) => {
    console.error('An error occurred while fetching the CSV file:', error);
  });

*/
let TargetfixtureID;  // Declare it here as a global variable


document.addEventListener("DOMContentLoaded", initializePage);

function initializePage() {
    const urlParams = new URLSearchParams(window.location.search);
    TargetfixtureID = parseInt(urlParams.get('teamID')); // Assign the value here
    updateMatchesForDate(TargetfixtureID);
}


  let today = new Date();
  const formattedToday = `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;

  function loadFixtures() {
    fetch('fixtures.csv')
      .then(response => response.text())
      .then(csvString => {
        // Parse the CSV string
        Papa.parse(csvString, {
          header: true,
          delimiter: ';', // Specify the field delimiter as a semi-colon
          skipEmptyLines: true,
          complete: function (results) {
            allFixtures = results.data.map(row => {
              const [latitude, longitude] = row.Home_Location.slice(1, -1).split(', ').map(parseFloat);
              return {
                date: row.Date.split(" ")[0],
                startingAt: row.Starting_At,
                timezone: row.Timezone,
                fixtureID: parseInt(row.Fixture_ID),
                referee: row.Fixture_Referee,
                statusLong: row.Status_Long,
                statusShort: row.Status_Short,
                statusElapsed: parseFloat(row.Status_Elapsed),
                leagueID: parseInt(row.League_ID),
                leagueName: row.League_Name,
                leagueCountry: row.League_Country,
                leagueLogo: row.League_Logo,
                homeTeam: {
      clubImageName: row.Home_Logo,
      clubName: row.Home_Name,
      latitude: latitude,
      longitude: longitude,
      homeID: parseInt(row.Home_ID) // Adding the HomeID
    },
                homeWinner: row.Home_Winner === "True",
                awayTeam: {
        clubImageName: row.Away_Logo,
        clubName: row.Away_Name,
        awayID: parseInt(row.Away_ID) // Adding the AwayID
      },
                awayWinner: row.Away_Winner === "True",
                goalsHome: parseFloat(row.Goals_Home),
                goalsAway: parseFloat(row.Goals_Away),
                halftimeHome: parseFloat(row.Score_Halftime_Home),
                halftimeAway: parseFloat(row.Score_Halftime_Away),
                fulltimeHome: parseFloat(row.Score_Fulltime_Home),
                fulltimeAway: parseFloat(row.Score_Fulltime_Away),
              };
            });

              initializePage();
            // Call your existing function to update the matches with the parsed data
          },
        });
      })
      .catch(error => console.error('An error occurred while fetching fixtures.csv:', error));
  }

  // Don't forget to actually call loadFixtures at some point
  loadFixtures();


  function updateMatchesForDate(TargetID) {
    const matchesDisplay = document.getElementById("matchContainer");

    // Clear previous matches
    matchesDisplay.innerHTML = "";

    // Filtering
    const filteredMatch = allFixtures.find(match => parseInt(match.homeTeam.homeID) === parseInt(TargetID) || parseInt(match.awayTeam.awayID) === parseInt(TargetID));


    if (filteredMatch) {
      displayMatches([filteredMatch]); // Wrapping it in an array as displayMatches expects an array
    } else {
      console.log("No matches found for the provided fixtureID");
    }
  }

  function displayMatches(matches) {

}







  document.addEventListener("DOMContentLoaded", initializePage());

  document.addEventListener("DOMContentLoaded", function() {
  const goToMatchesButton = document.getElementById('goToMatches');

  goToMatchesButton.addEventListener('click', function() {
    window.history.back();
  });

  // Retrieve the teamID from the URL
  const teamID = parseInt(new URLSearchParams(window.location.search).get("teamID"), 10);

  // Search for the team's information based on the teamID
  const teamInfo = allFixtures.find(fixture =>
    fixture.homeTeam.homeID === teamID ||
    fixture.awayTeam.awayID === teamID
  );

  if (teamInfo) {
    // Determine if the team is playing at home or away
    const homeOrAway = teamInfo.homeTeam.homeID === teamID ? "home" : "away";

    // Get the appropriate team's data
    const teamData = teamInfo[`${homeOrAway}Team`];

    // Populate the HTML
    document.getElementById("teamName").textContent = teamData.clubName;
    document.getElementById("teamLogo").src = teamData.clubImageName;

    // Populate the stadium image
    // Use Home_Stadium for home games and Away_Stadium for away games
    // Assuming you have the stadium image in the fixture
    // Your code here to populate the stadium image

  }
}); // Fixed the missing closing parentheses and curly brace here





  // Function to calculate straight-line distance

 var navBar = document.querySelector(".nav");
  navBar.style.display = "flex";
  const navigation_items_elms = document.querySelectorAll(
  ".navigation-bar .list-items .item"
);
const navigation_pointer = document.querySelector(".navigation-bar .pointer");

navigation_items_elms.forEach((item, index) => {
  item.addEventListener("click", (e) => {
    e.preventDefault();
    navigation_items_elms.forEach((itm) => itm.classList.remove("active"));
    item.classList.add("active");

    const parentWidth = item.parentElement.clientWidth;
    const lefPercent = (parentWidth / navigation_items_elms.length) * index;
    navigation_pointer.style.left = lefPercent + "px";
  });
});



</script>

</html>
