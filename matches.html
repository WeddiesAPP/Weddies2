<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weddies - Fixtures </title>
  <meta name="description" content="Find and discover clubs using Weddies, the ultimate club search engine. Search by club name, league, and date.">
  <link rel="icon" href="Weddies-bg.png" type="image/x-icon">
  <link rel="shortcut icon" href="Weddies.png" type="image/x-icon">
<style>







body {
  background-color: black;
  margin-bottom: 10vh;
}

/* Navigation */
.nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 10vh;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
  background-color: #ffffff;
  overflow-x: auto;
  z-index: 9999;
}

.nav__link {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  min-width: 50px;
  overflow: hidden;
  white-space: nowrap;
  font-family: sans-serif;
  font-size: 1rem;
  color: #444444;
  text-decoration: none;
  transition: background-color 0.1s ease-in-out;
}

.nav__link:hover {
  background-color: #eeeeee;
}

.nav__link--active {
  color: #009578;
}

.nav__icon {
  font-size: 1.2rem;
}

.material-symbols-outlined {
  font-variation-settings: 'FILL' 1, 'wght' 700, 'GRAD' 0, 'opsz' 72;
  color: black;
}

.nav__link--active .material-symbols-outlined {
  color: #009578;
}

/* Matches */
.match {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0em;
  border: 1px solid #ccc;
  border-radius: 10px;
  margin: 1vh;
  background-color: #f9f9f9;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.homeLogo, .awayLogo {
  width: 5vw;
  height: auto;
}

.homeName,
.awayName {
  flex: 1;
  flex-basis: 40%;  /* Allocating 40% of available space */
  text-align: center;
  font-size: 1rem;
}

.matchTime {
  flex: 0 0 auto;
  flex-basis: 20%;  /* Allocating 20% of available space */
  text-align: center;
  font-size: 1rem;
}

/* League */
.league {
  margin-top: 2vh;
  margin-bottom: 2vh;
  padding: 0em;
  background-color: white;
border-radius: 25px;
  border: 3px solid white;}

.league h2 {
  margin: 0;
  padding: 0em;
  background-color: transparent;
}

.leagueInfo {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: white; border-radius: 25px;
  border: 2px solid white;}

.leagueLogo {
  width: auto;
  height: 7vh;
  margin-right: 1vw;
}

.date-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 5vh; margin-bottom: 5vh;
  background-color: transparent;
  cursor: pointer;
color: white;}

.date-arrow {
  cursor: pointer;
  background: none;
  border: none;
  font-size: 1.125em;
  margin: 0 0.625em;
 color: white;}

.logo-weddies-bg {
  position: absolute;
  top: 1.25em;
  left: 1.25em;
  z-index: 999;
  width: 4em;
  height: 4em;
}



</style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <title>Matches Page</title>
</head>
<body>

<nav class="nav">
    <a href="index.html" class="nav__link">
        <span class="material-symbols-outlined">
            pin_drop
        </span>
    </a>
    <a href="#" class="nav__link">
        <span class="material-symbols-outlined">
            person
        </span>
    </a>
    <a href="matches.html" class="nav__link nav__link--active">
        <span class="material-symbols-outlined">
            table_rows
        </span>
    </a>
</nav>
<img src="Weddies-bg.png" alt="Logo" class="logo-weddies-bg"></div>
<div id="date-container" class="date-container">
  <button id="prev-day" class="date-arrow">&#9664;</button> <!-- Left arrow -->
  <span id="date-display">Today</span>
  <input type="date" id="hidden-date-picker" style="display: none;">
  <button id="next-day" class="date-arrow">&#9654;</button> <!-- Right arrow -->
</div>



 <div id="matchContainer">
    <!-- Match divs will be populated by JavaScript -->
  </div>
</body>
<script>
let clubs = [];
let allFixtures = [];
// Fetch the CSV file
fetch('teamsdata.csv')
.then((response) => response.text())
.then((csvString) => {
  // Parse the CSV string
  Papa.parse(csvString, {
    header: true, // Specify that the CSV file has headers
    dynamicTyping: false,
    skipEmptyLines: true,
    complete: function (results) {
      clubs = results.data.map((row) => {
        return {
          leagueID: row.leagueID,
          countryID: row.countryID,
          leagueName: row.leagueName,
          leagueActive: row.leagueActive,
          leagueShortCode: row.leagueShortCode,
          leagueImage: row.leagueImageName,
          leagueType: row.leagueType,
          leagueSubType: row.leagueSubType,
          leagueLastPlayedAt: row.leagueLastPlayedAt,
          leagueCategory: row.leagueCategory,
          seasonID: row.seasonID,
          seasonName: row.seasonName,
        clubID: row.teamID,
          clubName: row.teamName,
          clubImageName: row.clubImageName,
          clubFounded: row.clubFounded,
          clubGender: row.clubGender,
          stadiumID: row.stadiumID,
          stadiumName: row.stadiumName,
          stadiumCity: row.stadiumCity,
          stadiumAdress: row.stadiumAdress,
          stadiumZipcode: row.stadiumZipcode,
          latitude: parseFloat(row.latitude.replace(',', '.')),
         longitude: parseFloat(row.longitude.replace(',', '.')),
          stadiumSurface: row.stadiumSurface,
          stadiumCapacity: row.stadiumCapacity,
        };
      });
      // Call your existing functions with the new data
    loadFixtures();
      console.log(clubs);
    },
  });
})
.catch((error) => {
  console.error('An error occurred while fetching the CSV file:', error);
});


  let today = new Date();
  const formattedToday = `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;

  const dateContainer = document.getElementById('date-container');
  const dateDisplay = document.getElementById('date-display');
  const hiddenDatePicker = document.getElementById('hidden-date-picker');
  const prevDayButton = document.getElementById('prev-day');
  const nextDayButton = document.getElementById('next-day');

  hiddenDatePicker.value = formattedToday;
  dateDisplay.textContent = 'Today';

  function loadFixtures() {

    fetch('fixtures.csv')
      .then(response => response.text())
      .then(csvString => {
        Papa.parse(csvString, {
          header: true,
          skipEmptyLines: true,
          complete: function (results) {
            allFixtures = results.data.map(row => {
              const [homeTeamName, awayTeamName] = row.Name.split(' vs ');
              const homeTeam = clubs.find(club => club.clubName === homeTeamName);
              const awayTeam = clubs.find(club => club.clubName === awayTeamName);
              return {
                date: row.Date,
                leagueID: row['League ID'], // Include the League ID
                homeTeam: homeTeam || { clubName: homeTeamName, clubImageName: 'default.jpg' },
                awayTeam: awayTeam || { clubName: awayTeamName, clubImageName: 'default.jpg' },
                time: row['Starting At'],
              };
            });

            updateMatchesForDate(formattedToday);

          },
        });
      })
      .catch(error => console.error('An error occurred while fetching fixtures.csv:', error));
  }

  loadFixtures();

  dateContainer.addEventListener('click', function(event) {
    if (event.target.id !== 'prev-day' && event.target.id !== 'next-day') {
      hiddenDatePicker.focus();
      hiddenDatePicker.click();
    }
  });

  hiddenDatePicker.addEventListener('change', function() {
    const selectedDate = this.value;
    dateDisplay.textContent = selectedDate === formattedToday ? 'Today' : selectedDate;
    updateMatchesForDate(selectedDate);
  });

  prevDayButton.addEventListener('click', () => {
    changeDate(-1);
  });

  nextDayButton.addEventListener('click', () => {
    changeDate(1);
  });

  function changeDate(days) {
    const currentVal = hiddenDatePicker.value;
    const currentDate = new Date(currentVal);
    currentDate.setDate(currentDate.getDate() + days);
    const newDate = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${currentDate.getDate().toString().padStart(2, '0')}`;
    hiddenDatePicker.value = newDate;
    dateDisplay.textContent = newDate === formattedToday ? 'Today' : newDate;
    updateMatchesForDate(newDate);
  }




function updateMatchesForDate(selectedDate) {
  // Filter the matches for the selected date
  const filteredMatches = allFixtures.filter(match => match.date === selectedDate);

  // Clear the current matches
  document.getElementById('matchContainer').innerHTML = '';

  // Display the new matches
  displayMatches(filteredMatches);
}
// Function to display matches
function displayMatches(matches) {
  const matchContainer = document.getElementById('matchContainer');
  matchContainer.innerHTML = ''; // Clear previous matches

  // Group the matches by league
  const matchesByLeague = {};
  matches.forEach(match => {
    const leagueID = match.leagueID;
    if (!matchesByLeague[leagueID]) {
      matchesByLeague[leagueID] = [];
    }
    matchesByLeague[leagueID].push(match);
  });

  // Create a div for each league and add its matches
  for (const [leagueID, leagueMatches] of Object.entries(matchesByLeague)) {
    const leagueDiv = document.createElement('div');
    leagueDiv.className = 'league';

    const leagueInfo = document.createElement('div');
    leagueInfo.className = 'leagueInfo';

    const leagueLogo = document.createElement('img');
    const leagueDetails = clubs.find(club => club.leagueID === leagueID);
    leagueLogo.src = leagueDetails.leagueImage;
    leagueLogo.className = 'leagueLogo';

    const leagueName = document.createElement('h2');
    leagueName.textContent = leagueDetails ? leagueDetails.leagueName : 'Unknown League';

    leagueInfo.appendChild(leagueLogo);
    leagueInfo.appendChild(leagueName);
    leagueDiv.appendChild(leagueInfo);

    leagueMatches.forEach(match => {
      const matchDiv = document.createElement('div');
      matchDiv.className = 'match';

      const homeLogo = document.createElement('img');
      homeLogo.src = match.homeTeam.clubImageName;
      homeLogo.className = 'homeLogo';

      const awayLogo = document.createElement('img');
      awayLogo.src = match.awayTeam.clubImageName;
      awayLogo.className = 'awayLogo';

      const timeDiv = document.createElement('div');
timeDiv.className = 'matchTime';
const matchDate = new Date(match.time);
const formattedTime = `${matchDate.getHours()}:${matchDate.getMinutes().toString().padStart(2, '0')}  UTC`;
timeDiv.textContent = formattedTime;

      const homeName = document.createElement('div');
      homeName.className = 'homeName';
      homeName.textContent = match.homeTeam.clubName;

      const awayName = document.createElement('div');
      awayName.className = 'awayName';
      awayName.textContent = match.awayTeam.clubName;

      matchDiv.appendChild(homeLogo);
      matchDiv.appendChild(homeName);
      matchDiv.appendChild(timeDiv);
      matchDiv.appendChild(awayName);
      matchDiv.appendChild(awayLogo);
      leagueDiv.appendChild(matchDiv);
    });

    matchContainer.appendChild(leagueDiv);
  }
}



 var navBar = document.querySelector(".nav");
  navBar.style.display = "flex";
  const navigation_items_elms = document.querySelectorAll(
  ".navigation-bar .list-items .item"
);
const navigation_pointer = document.querySelector(".navigation-bar .pointer");

navigation_items_elms.forEach((item, index) => {
  item.addEventListener("click", (e) => {
    e.preventDefault();
    navigation_items_elms.forEach((itm) => itm.classList.remove("active"));
    item.classList.add("active");

    const parentWidth = item.parentElement.clientWidth;
    const lefPercent = (parentWidth / navigation_items_elms.length) * index;
    navigation_pointer.style.left = lefPercent + "px";
  });
});
</script>

</html>
